---
title: 音视频理论知识
category: 音视频 
tag: 音视频基础
---

# 音视频理论知识

### 封装格式

#### 什么是封装格式

视频封装格式也叫做容器，它是将已经编码压缩好的视频流、音频流以及字幕按照一定的方式放到一个文件中，方便播放软件播放。一般来说，视频文件的后缀名就是它的封装格式。

### 解码/编码

视频经过H.264解码器视频解码成视频原始数据YUV，YUV经过转换成ARGB8888，最后通过屏幕渲染
音频经过AAC进行音频解码，解码成音频原始数据PCM，最后通过喇叭进行播放声音，(音频重采样，双声道转单声道)

#### 为什么要进行编码？

视频是连续的图像序列，由连续的帧构成，一帧即为一副图像
由于人眼的视觉暂留效应，当帧序列以一定的速率播放时，我们看到的就是动作连续的视频
这么多的连续图像数据如果不经过编码数据量就很大。

比如一个1920*1080分辨率，每秒30帧的视频，一秒钟需要1920*1080*30*32  大小大概为237Mb的数据


#### 编码的目的

编码的目的，就是为了压缩数据，有利于存储和传输，编码的核心思想就是去除冗余信息
冗余信息有以下几点：

1. 空间冗余->图像内部相邻像素之间存在较强的相关性(相邻像素重复)
2. 时间冗余->视频图像序列中的不同帧之间的相关性(帧之间差值)
3. 视觉冗余->人眼不敏感的图像信息

#### 视频解码流程图

![视频解码流程图](https://cdn.nlark.com/yuque/0/2022/png/158084/1659528648168-7683b7c9-c758-4ae1-b367-562bc7d1b3b1.png?x-oss-process=image%2Fresize%2Cw_1820%2Climit_0)


### I帧 B帧 P帧

* I帧:帧内编码帧,关键帧,I帧可以看作一个图像经过压缩之后的产物,可以单独解码出一个完整的图像(压缩率最低)

* P帧:向前预测/参考 编码帧,记录了本帧跟之前的一个关键帧(或P帧)的差别,解码时需用之前缓存的画面叠加上本帧定义的差别，生成最终的画面

* B帧:双向预测/参考 编码帧,记录了本帧与前后帧的差别,解码需要参考前面一个I帧或者P帧,同时也需要后面的P帧才能解码一张完整的图像